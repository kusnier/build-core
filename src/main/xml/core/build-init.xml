<?xml version="1.0"?>
<project name="xp-framework-master" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant">

  <!-- Private settings -->
  <property name="build.target" value="${basedir}/target"/>
  <property name="build.target.classes" value="${build.target}/classes"/>
  <property name="build.target.testClasses" value="${build.target}/test-classes"/>
  <property name="build.target.app" value="${build.target}/app"/>
  <property name="xp.build.version" value="@@xp.build.version@@"/>

  <target name="xp.setup.ivy" depends="xp.provide.dependencies">
    <ivy:info file="ivy.xml"/>

    <echo>:: This is XP Framework Build System version ${xp.build.version} ::</echo>
    
    <property name="xp.lookup.resolver" value="shared-lookup-${ivy.status}"/>
    <property name="xp.publish.resolver" value="shared-publish-${ivy.status}"/>

    <pathconvert property="xp.build.settings">
      <dirset dir="${xp.build.home}">
        <include name="resources/xml/settings/"/>
        <include name="settings/"/>
      </dirset>
    </pathconvert>
    <ivy:configure file="${xp.build.settings}/ivysettings.xml" override="true"/>
  </target>
  
  <target name="xp.setup.xp">
    <mkdir dir="${build.target}"/>
  </target>

  <target name="xp.setup.build"
   extensionOf="prepare"
   depends="xp.setup.ivy, xp.setup.xp, xp.get.resolver, xp.build.number, xp.extract.bootstrap"
  />
  
  <target name="xp.clean.ivy" extensionOf="clean" depends="xp.setup.ivy">
    <ivy:cleancache/>
  </target>

  <target name="xp.clean" extensionOf="clean">
    <delete dir="${build.target}"/>
  </target>
</project>
