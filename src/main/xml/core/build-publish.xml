<?xml version="1.0" encoding="UTF-8"?>
<project name="xp-framework-release" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant">

  <target name="install:install" extensionOf="install" depends="xp.setup.ivy, xp.get.resolver">
    <echo>===> Installing ${ivy.organisation}#${ivy.module} @ local</echo>

    <ivy:publish
     artifactspattern="${build.target}/[artifact]-[revision](-[classifier]).[ext]"
     revision="${ivy.new.revision}"
     resolver="local"
     overwrite="true"
     publishivy="true"
    />

    <ivy:install
     organisation="${ivy.organisation}"
     module="${ivy.module}"
     revision="${ivy.new.revision}"
     from="${xp.lookup.resolver}"
     to="local"
     overwrite="true"
    />
  </target>

  <target name="publish:publish" extensionOf="publish" depends="xp.setup.ivy, xp.get.resolver">
    <echo>===> Deploying ${ivy.organisation}#${ivy.module} @ ${xp.publish.resolver}</echo>

    <!-- Declare if not declared previously -->
    <property name="xp.overwrite" value="false"/>

    <ivy:publish
     artifactspattern="${build.target}/[artifact]-[revision](-[classifier]).[ext]"
     revision="${ivy.new.revision}"
     resolver="${xp.publish.resolver}"
     overwrite="${xp.overwrite}"
     publishivy="true"
    />
  </target>
</project>
