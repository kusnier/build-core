<?xml version="1.0" encoding="UTF-8"?>
<project name="xp-framework-package">
  <target name="xp.package.sources" extensionOf="package" depends="ivy-info">
    <xar dir="${build.target}/classes"
     target="${build.target}/${ivy.module}-${ivy.revision}.xar"
    />
  </target>

  <target name="xp.package.tests" extensionOf="package" depends="ivy-info">
    <xar dir="${build.target}/test-classes"
     target="${build.target}/${ivy.module}-test-${ivy.revision}.xar"
    />
  </target>

  <target name="xp.package.meta" extensionOf="package" depends="ivy-info, xp.package.sources, xp.package.tests">
    <echo>===> Packaging ${ivy.organisation}#${ivy.module}</echo>

    <ivy:resolve/>
    <ivy:deliver
     deliverpattern="${build.target}/ivy.xml"
     revision="${ivy.revision}${project.qualifier}"
     pubrevision="${ivy.revision}${project.qualifier}"
     pubdate="now"
     status="${ivy.publish.status}"
    />

    <ivy:makepom
     ivyfile="${build.target}/ivy.xml"
     pomfile="${build.target}/pom.xml"
     printIvyInfo="false"
    />
  </target>
</project>