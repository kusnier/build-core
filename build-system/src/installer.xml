<?xml version="1.0" encoding="UTF-8"?>
<project name="xp-framework-build-installer" xmlns:ivy="antlib:org.apache.ivy.ant">
  <property name="install.dir" value="${user.home}/.ant/xp-build"/>
  <property name="lib.dir" value="${user.home}/.ant/lib"/>
  <property name="version" value="1.3.0"/>

  <property name="ivy.install.version" value="2.2.0"/>
  <property name="ivy.jar.file" value="ivy-${ivy.install.version}"/>

  <echo>===> Installing XP Framework build system into ${install.dir}</echo>
  <mkdir dir="${install.dir}"/>
  <delete>
    <fileset dir="${install.dir}" includes="**/*"/>
  </delete>

  <echo>===> Downloading build scripts</echo>
  <get src="http://xp-framework.net/repository/net.xp_framework/build/build-${version}.zip" dest="${install.dir}"/>
  <unzip dest="${install.dir}" src="${install.dir}/build-${version}.zip"/>

  <echo>===> Installing dependencies</echo>
  <echo>---> Ivy ${ivy.install.version}</echo>
  <get
   src="http://repo1.maven.org/maven2/org/apache/ivy/ivy/${ivy.install.version}/ivy-${ivy.install.version}.jar"
   dest="${lib.dir}/"
   usetimestamp="true"
   verbose="true"
  />

  <echo>---> Ivysvn 2.2.0</echo>
  <get
   src="http://ivysvn.googlecode.com/files/ivysvnresolver-2.2.0-bin.tgz"
   dest="${lib.dir}"
   usetimestamp="true"
   verbose="true"
  />
  <untar
   src="${lib.dir}/ivysvnresolver-2.2.0-bin.tgz"
   dest="${lib.dir}"
   compression="gzip"
  >
    <patternset>
      <include name="**/*.jar"/>
    </patternset>
    <mapper type="flatten"/>
  </untar>

  <echo>---> SvnAnt 1.3.0</echo>
  <!-- get
   src="http://subclipse.tigris.org/files/documents/906/46267/svnant-1.3.0.zip"
   dest="${xp.build.lib.dir}"
   verbose="true"
   usetimestamp="true"
  / -->
  <!-- This uses cookies and redirects the client; ant <get> does not support this -->
  <echo>Download svnant from http://subclipse.tigris.org/files/documents/906/46267/svnant-1.3.0.zip to ${lib.dir}, please.</echo>
  <unzip
   src="${lib.dir}/svnant-1.3.0.zip"
   dest="${lib.dir}"
  >
    <patternset>
      <include name="**/*.jar"/>
    </patternset>
    <mapper type="flatten"/>
  </unzip>

  <echo>---> jsch 0.1.44</echo>
  <get
   src="http://downloads.sourceforge.net/project/jsch/jsch.jar/0.1.44/jsch-0.1.44.jar"
   dest="${lib.dir}"
   verbose="true"
  />


</project>
