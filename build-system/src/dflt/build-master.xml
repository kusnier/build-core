<?xml version="1.0"?>
<project name="xp-framework-master" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant">
  <dirname property="include.base" file="${ant.file.xp-framework-master}"/>

  <!-- Private settings -->
  <property name="build.target" value="${basedir}/target"/>
  <property name="build.target.classes" value="${build.target}/classes"/>
  <property name="build.target.testClasses" value="${build.target}/test-classes"/>
  <property name="build.target.webapp" value="${build.target}/webapp"/>
  <property name="project.generated.ivy.file" value="${build.target}/ivy.xml"/>
  <property name="project.generated.pom.file" value="${build.target}/pom.xml"/>

  <!-- Try some settings locations -->
  <property file="${xp.build.home}/svn.properties"/>
  <property file="${user.home}/.ant/svn.properties"/>
  
  <available property="build.test.exist.unittest.ini" file="${basedir}/unittest.ini"/>
  
  <target name="setup-ivy" extensionOf="prepare" depends="install-ivy">
    <ivy:settings file="${xp.build.home}/settings/ivysettings.xml"/>
  </target>
  
  <target name="ivy-info">
    <ivy:info/>
  </target>

  <target name="xp.setup.paths" extensionOf="prepare" depends="ivy-info">
    <ivy:resolve/>
    <ivy:cachefileset type="bootstrap" setid="build.bootstrap"/>

    <unzip dest="${build.target}/bootstrap">
      <fileset refid="build.bootstrap"/>
    </unzip>
  </target>
  
  <target name="xp.clean.ivycache" extensionOf="clean" depends="ivy-info">
    <ivy:cleancache/>
  </target>
  
  <target name="xp.clean" extensionOf="clean">
    <delete dir="${build.target}"/>
  </target>
</project>
