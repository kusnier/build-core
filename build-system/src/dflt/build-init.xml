<?xml version="1.0"?>
<project name="xp-framework-master" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant">

  <!-- Private settings -->
  <property name="build.target" value="${basedir}/target"/>
  <property name="build.target.classes" value="${build.target}/classes"/>
  <property name="build.target.testClasses" value="${build.target}/test-classes"/>
  <property name="build.target.app" value="${build.target}/app"/>

  <!-- Try some settings locations -->
  <property file="${xp.build.home}/svn.properties"/>
  <property file="${user.home}/.ant/svn.properties"/>
  
  <target name="xp.setup.ivy" depends="xp.provide.dependencies">
    <ivy:info file="ivy.xml"/>
    
    <property name="xp.lookup.resolver" value="shared-lookup-${ivy.status}"/>
    <property name="xp.publish.resolver" value="shared-publish-${ivy.status}"/>
    
    <ivy:configure file="${xp.build.home}/settings/ivysettings.xml" override="true"/>
  </target>
  
  <target name="ivy-info" depends="xp.setup.ivy"/>

  <target name="xp.setup.paths" extensionOf="prepare" depends="ivy-info">
    <ivy:resolve/>
    <ivy:cachefileset type="bootstrap" setid="build.bootstrap"/>

    <unzip dest="${build.target}/bootstrap">
      <fileset refid="build.bootstrap"/>
    </unzip>
  </target>
  
  <target name="xp.clean.ivycache" extensionOf="clean" depends="ivy-info">
    <ivy:cleancache/>
  </target>
  
  <target name="xp.clean" extensionOf="clean">
    <delete dir="${build.target}"/>
  </target>
</project>
